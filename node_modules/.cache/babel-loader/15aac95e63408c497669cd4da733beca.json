{"ast":null,"code":"var _jsxFileName = \"/Users/maryna/Desktop/projects/test-app/src/componemnts/Feedback/Feedback.js\",\n    _s = $RefreshSig$();\n\nimport FeedbackFooter from \"./FeedbackFooter\";\nimport FeedbackForm from \"./FeedbackForm\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { formActions } from \"../../store/form\";\nimport Modal from \"../UI/Modal\";\nimport { Circle, Clouds, Goodie1, MainSection, Map, Smile1, Smile2 } from \"./Feedback.styled\";\nimport useFetchData from \"../../hooks/useFetchData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Feedback = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const data = useSelector(state => {\n    return {\n      name: state.form.name.value,\n      email: state.form.email.value,\n      message: state.form.message.value\n    };\n  });\n  const showModal = useSelector(state => state.form.showModal);\n  const modalMessage = useSelector(state => state.form.modalMessage);\n  const [error, skipError, requestFunction] = useFetchData();\n\n  const handleClose = () => {\n    dispatch(formActions.closeModal());\n  };\n\n  const dataProcess = data => {\n    let modalMessage = \"Storage failed!\";\n\n    if (data.id) {\n      modalMessage = `Successfully stored to DB. Record ID: ${data.id}`;\n    }\n\n    if (data.error) {\n      modalMessage = `${data.error}: ${data.message}`;\n    }\n\n    dispatch(formActions.setModalMessage(modalMessage));\n    dispatch(formActions.showModal());\n  };\n\n  const storeMessage = () => {\n    dispatch(formActions.setModalMessage(\"\"));\n    requestFunction({\n      url: \"http://localhost:3001/messages\",\n      method: \"POST\",\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }, dataProcess);\n  };\n\n  if (error) {\n    dispatch(formActions.setModalMessage(error));\n    dispatch(formActions.showModal());\n    skipError();\n  }\n\n  const ModalContent = showModal ? /*#__PURE__*/_jsxDEV(Modal, {\n    onClick: handleClose,\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: modalMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click on the screen to close this message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this) : \"\";\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MainSection, {\n      children: [/*#__PURE__*/_jsxDEV(Smile1, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Smile2, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Clouds, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Goodie1, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Map, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Circle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FeedbackForm, {\n        storeMessage: storeMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FeedbackFooter, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), ModalContent]\n  }, void 0, true);\n};\n\n_s(Feedback, \"EMRRilJIyxDyN638lYGXG+wVk4I=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useFetchData];\n});\n\n_c = Feedback;\nexport default Feedback;\n\nvar _c;\n\n$RefreshReg$(_c, \"Feedback\");","map":{"version":3,"names":["FeedbackFooter","FeedbackForm","useSelector","useDispatch","formActions","Modal","Circle","Clouds","Goodie1","MainSection","Map","Smile1","Smile2","useFetchData","Feedback","dispatch","data","state","name","form","value","email","message","showModal","modalMessage","error","skipError","requestFunction","handleClose","closeModal","dataProcess","id","setModalMessage","storeMessage","url","method","body","JSON","stringify","headers","ModalContent"],"sources":["/Users/maryna/Desktop/projects/test-app/src/componemnts/Feedback/Feedback.js"],"sourcesContent":["import FeedbackFooter from \"./FeedbackFooter\";\nimport FeedbackForm from \"./FeedbackForm\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { formActions } from \"../../store/form\";\nimport Modal from \"../UI/Modal\";\nimport {\n  Circle,\n  Clouds,\n  Goodie1,\n  MainSection,\n  Map,\n  Smile1,\n  Smile2,\n} from \"./Feedback.styled\";\nimport useFetchData from \"../../hooks/useFetchData\";\n\nconst Feedback = () => {\n  const dispatch = useDispatch();\n  const data = useSelector((state) => {\n    return {\n      name: state.form.name.value,\n      email: state.form.email.value,\n      message: state.form.message.value,\n    };\n  });\n  const showModal = useSelector((state) => state.form.showModal);\n  const modalMessage = useSelector((state) => state.form.modalMessage);\n  const [error, skipError, requestFunction] = useFetchData();\n  const handleClose = () => {\n    dispatch(formActions.closeModal());\n  };\n\n  const dataProcess = (data) => {\n    let modalMessage = \"Storage failed!\";\n    if (data.id) {\n      modalMessage = `Successfully stored to DB. Record ID: ${data.id}`;\n    }\n    if (data.error) {\n      modalMessage = `${data.error}: ${data.message}`;\n    }\n    dispatch(formActions.setModalMessage(modalMessage));\n    dispatch(formActions.showModal());\n  };\n  const storeMessage = () => {\n    dispatch(formActions.setModalMessage(\"\"));\n    requestFunction(\n      {\n        url: \"http://localhost:3001/messages\",\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: { \"Content-Type\": \"application/json\" },\n      },\n      dataProcess\n    );\n  };\n  if (error) {\n    dispatch(formActions.setModalMessage(error));\n    dispatch(formActions.showModal());\n    skipError();\n  }\n  const ModalContent = showModal ? (\n    <Modal onClick={handleClose}>\n      <>\n        <p>{modalMessage}</p>\n        <p>Click on the screen to close this message</p>\n      </>\n    </Modal>\n  ) : (\n    \"\"\n  );\n  return (\n    <>\n      <MainSection>\n        <Smile1 />\n        <Smile2 />\n        <Clouds />\n        <Goodie1 />\n        <Map />\n        <Circle />\n        <FeedbackForm storeMessage={storeMessage} />\n        <FeedbackFooter />\n      </MainSection>\n      {ModalContent}\n    </>\n  );\n};\n\nexport default Feedback;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}